<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

 

  <style>
    /* Product Card */
.product-card {
  border: 1px solid #ddd;
  padding: 15px;
  margin: 10px;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  text-align: center;
  background-color: #ffffff;
  transition: box-shadow 0.3s ease;
}
.product-card .discounted-price {
  font-size: 1.5rem; /* Larger font size for emphasis */
  font-weight: bold; /* Bold text */
  margin-top: 10px; /* Margin at the top */
  display: block; /* Ensure it displays as a block element */
}

.product-card .discounted-price .price-label {
  color: #2c6b2f; /* Deep green color for the label */
}

.product-card .discounted-price .price-value {
  color: #e74c3c; /* Red color for the price value */
  background-color: #f9f9f9; /* Light background for the price text */
  padding: 5px; /* Padding around the price value */
  border-radius: 3px; /* Rounded corners for the background */
  border: 1px solid #e74c3c; /* Border matching the price color */
}

.product-card:hover {
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.product-img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
}

/* General Button Styles */
.btn {
  display: inline-block;
  font-weight: 600; /* Slightly bolder text */
  text-align: center;
  vertical-align: middle;
  cursor: pointer;
  border: 2px solid transparent;
  border-radius: 4px;
  padding: 12px 24px;
  font-size: 1rem;
  line-height: 1.5;
  transition: all 0.3s ease;
  text-decoration: none;
  width: 100%; /* Make the button full-width */
}

/* Primary Button Styles */
.btn-primary {
  color: #ffffff;
  background-color: #007bff; /* Primary blue background */
  border-color: #007bff; /* Blue border */
}

.btn-primary:hover,
.btn-primary:focus {
  background-color: #0056b3; /* Darker blue on hover */
  border-color: #004085; /* Darker border on hover */
  box-shadow: 0 0 0 0.2rem rgba(38, 143, 255, 0.5); /* Light blue shadow */
}

.btn-primary:active {
  background-color: #004085; /* Even darker blue when clicked */
  border-color: #00376b; /* Darker border when clicked */
}

.btn-primary.disabled,
.btn-primary:disabled {
  background-color: #007bff; /* Keep background same as default */
  border-color: #007bff; /* Keep border same as default */
  opacity: 0.65;
  cursor: not-allowed;
}

/* Optional: Add shadow effect */
.btn-primary {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Light shadow for depth */
}

.btn-primary:focus,
.btn-primary:hover {
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3); /* Deeper shadow on hover */
}

/* Responsive and spacing adjustments */
@media (max-width: 768px) {
  .btn {
    padding: 10px 20px;
    font-size: 0.9rem;
  }
}


/* Shopping Cart Icon */
#cart {
  position: fixed;
  top: 100px;
  right: 10px;
  width: 60px;
  height: 60px;
  background-color: #ffd700; /* Blue background */
  border-radius: 20px; /* Circular shape */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Shadow effect */
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  color: #ffffff; /* White text color */
  font-size: 24px; /* Icon size */
  transition: background-color 0.3s ease, transform 0.3s ease; /* Smooth transition effects */
}

#cart:hover {
  background-color: #0056b3; /* Darker blue on hover */
  transform: scale(1.1); /* Slightly larger on hover */
}

#cartIcon {
  font-size: 30px; /* Adjusted icon size */
}

#cartCount {
  position: absolute;
  top: 5px;
  right: 5px;
  background-color: #ff0000; /* Red background */
  color: #ffffff; /* White text color */
  border-radius: 50%;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: bold;
}

/* Modal Styles */
.modal-content {
  border-radius: 12px; /* Rounded corners */
  border: none; /* Remove default border */
  overflow: hidden; /* Ensure content fits inside rounded corners */
}

.modal-header {
  background-color: #007bff; /* Blue background */
  color: #ffffff; /* White text color */
  border-bottom: 1px solid #e9ecef; /* Light gray border */
  padding: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-title {
  font-size: 1.5rem; /* Larger font size for the title */
  font-weight: bold; /* Bold text */
}

.close {
  font-size: 1.5rem; /* Larger font size for close button */
  color: #ffffff; /* White color */
}

.modal-body {
  display: flex; /* Enable flexbox layout */
  flex-direction: column; /* Stack items vertically */
  align-items: center; /* Center items horizontally */
  justify-content: center; /* Center items vertically if needed */
  padding: 20px; /* Padding inside the modal body */
}

#cartItems {
  margin-bottom: 20px; /* Space below the list */
}

.list-group-item {
  border: none; /* Remove border */
  padding: 15px; /* Padding inside item */
  border-radius: 8px; /* Rounded corners */
  margin-bottom: 10px; /* Space between items */
  background-color: #f8f9fa; /* Light gray background */
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Light shadow effect */
}

/* Checkout Button */
#checkoutBtn {
  background-color: #28a745; /* Green background */
  color: #ffffff; /* White text color */
  border: none; /* Remove default border */
  padding: 10px 20px; /* Padding for button size */
  font-size: 1rem; /* Font size for button text */
  border-radius: 8px; /* Rounded corners */
  cursor: pointer; /* Pointer cursor on hover */
  transition: background-color 0.3s ease, box-shadow 0.3s ease; /* Smooth transition effects */
  margin-top: 20px; /* Margin to separate from other elements */
}

#checkoutBtn:hover {
  background-color: #218838; /* Darker green on hover */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Shadow effect on hover */
}


/* Container for Quantity Controls */
.quantity-controls {
  display: flex;
  align-items: center;
  gap: 10px; /* Space between buttons and quantity display */
  padding: 5px;
  border: 1px solid #ddd; /* Light gray border */
  border-radius: 8px; /* Rounded corners */
  background-color: #f8f9fa; /* Light background color */
}

/* Quantity Change Button */
.quantity-controls .btn-light {
  background-color: #ffffff; /* White background */
  color: #007bff; /* Blue text color */
  border: 1px solid #ced4da; /* Light gray border */
  border-radius: 4px; /* Slightly rounded corners */
  padding: 0.5rem 0.75rem; /* Padding for button size */
  font-size: 1rem; /* Font size */
  cursor: pointer; /* Pointer cursor */
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease; /* Smooth transition */
}

/* Button Hover Effect */
.quantity-controls .btn-light:hover {
  background-color: #e2e6ea; /* Light gray background */
  color: #0056b3; /* Darker blue text color */
  border-color: #dae0e5; /* Slightly darker border */
}

/* Button Active Effect */
.quantity-controls .btn-light:active {
  background-color: #d6d6d6; /* Darker gray background */
  border-color: #c0c0c0; /* Darker border */
}

/* Quantity Display */
.quantity-controls .quantity {
  font-size: 1rem; /* Font size */
  font-weight: bold; /* Bold text */
  color: #333; /* Dark gray color */
  padding: 0.5rem; /* Padding for spacing */
  text-align: center; /* Center the text */
  min-width: 40px; /* Minimum width */
  border-left: 1px solid #ddd; /* Divider line between buttons */
  border-right: 1px solid #ddd; /* Divider line between buttons */
  background-color: #ffffff; /* White background for quantity display */
  border-radius: 4px; /* Rounded corners */
}




/* Order Form */
.order-form {
  padding: 20px;
}

.order-form input {
  border-radius: 8px;
  border: 1px solid #ddd;
  padding: 10px;
  margin-bottom: 15px;
  width: 100%;
}

.order-form button {
  background-color: #007bff;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 8px;
  font-size: 1rem;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.order-form button:hover {
  background-color: #0056b3;
}

.order-form label {
  display: block;
  margin-bottom: 5px;
  font-weight: bold;
}
/* Container for variations (size and color) */
.checkbox-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}

/* Style for each checkbox and label */
.checkbox-container div {
  margin: 5px; /* Increased margin for spacing */
  display: flex;
  align-items: center;
}

/* Style for the checkbox */
.checkbox-container input[type="checkbox"] {
  accent-color: #007bff; /* Custom checkbox color */
  margin-right: 10px;
  cursor: pointer;
  width: 15px; /* Increased width of the checkbox */
  height: 20px;
  border-radius: 10px; 
}

/* Style for the label */
.checkbox-container label {
  font-size: 1rem; /* Increased font size for better readability */
  color: #333;
  cursor: pointer;
  transition: color 0.3s ease;
}

/* Change label color on hover */
.checkbox-container label:hover {
  color: #ff0000; /* Color change on hover */
}








/* Container for shipping method options */
.shipping-method-container {
  background-color: #f4f4f4; /* Light gray background */
  border-radius: 8px; /* Rounded corners */
  padding: 15px; /* Padding around the content */
  max-width: 480px; /* Max width for the container */
  margin: 0 auto; /* Center the container */
  border: 1px solid #ccc; /* Light border */
}

/* Label for shipping method container */
.shipping-method-container > label {
  font-size: 1.15rem; /* Slightly larger font size for the label */
  font-weight: 500; /* Medium font weight */
  margin-bottom: 20px; /* Space below the label */
  display: block; /* Display as block for spacing */
  color: #222; /* Dark text color */
}

/* Styling for each shipping method option */
.shipping-method-container > div {
  display: flex;
  align-items: center;
  margin-bottom: 12px; /* Space between options */
  padding: 10px; /* Padding around each option */
  border-radius: 6px; /* Rounded edges for options */
  border: 1px solid #ddd; /* Light border around options */
  transition: background 0.3s ease, border-color 0.3s ease;
}

/* Hide default radio button */
.shipping-method-container input[type="radio"] {
  display: none;
}

/* Custom radio button styling */
.shipping-method-container label[for] {
  background: #ffffff; /* White background for labels */
  border-radius: 4px; /* Slightly rounded edges */
  display: flex;
  align-items: center;
  height: 36px;
  padding: 0 15px; /* Padding around the text */
  width: 100%; /* Full width */
  cursor: pointer; /* Pointer cursor on hover */
  position: relative;
  color: #555; /* Gray text color */
  transition: background 0.3s ease, color 0.3s ease;
}

/* Hover effect */
.shipping-method-container > div:hover {
  background: #e9ecef; /* Light gray background on hover */
  border-color: #bbb; /* Slightly darker border on hover */
}

/* Styling for checked state */
.shipping-method-container input[type="radio"]:checked + label {
  background: #007bff; /* Blue background for checked state */
  color: white; /* White text color for checked state */
}






   
  </style>

</head>
<body>
  <div class="container">
    <div id="products" class="row"></div>
  </div>
  <!-- Shopping Cart Icon -->
  <div id="cart" data-toggle="modal" data-target="#cartModal">
    <div id="cartIcon">🛒</div>
    <span id="cartCount">0</span>
  </div>

  <!-- Cart Modal -->
  <div class="modal fade" id="cartModal" tabindex="-1" role="dialog" aria-labelledby="cartModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="cartModalLabel">Shopping Cart</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <ul id="cartItems" class="list-group"></ul>
          <p>Total: <span id="cartTotal">0</span> Taka</p>
          <button id="checkoutBtn" class="btn btn-primary">Checkout</button>
        </div>
      </div>
    </div>
  </div>

 <!-- Order Form Modal -->
<div class="modal fade" id="orderModal" tabindex="-1" role="dialog" aria-labelledby="orderModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="orderModalLabel">Order Details</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="orderForm" class="order-form">
          <div class="form-group">
            <label for="name">Name</label>
            <input type="text" class="form-control" id="name" placeholder="Enter your name">
          </div>
          <div class="form-group">
            <label for="mobile">Mobile</label>
            <input type="text" class="form-control" id="mobile" placeholder="Enter your mobile number">
          </div>
          <div class="form-group">
            <label for="area">Area</label>
            <input type="text" class="form-control" id="area" placeholder="Enter your area">
          </div>
          <div class="form-group">
            <label for="thana">Thana</label>
            <input type="text" class="form-control" id="thana" placeholder="Enter your thana">
          </div>
          <div class="form-group">
            <label for="district">District</label>
            <input type="text" class="form-control" id="district" placeholder="Enter your district">
          </div>
          <div class="shipping-method-container">
            <label>Shipping Method</label>
            <div>
              <input type="radio" id="insideDhaka" name="shippingMethod" value="Inside Dhaka" data-charge="70">
              <label for="insideDhaka">Inside Dhaka (70 Taka)</label>
            </div>
            <div>
              <input type="radio" id="outsideDhaka" name="shippingMethod" value="Outside Dhaka" data-charge="110">
              <label for="outsideDhaka">Outside Dhaka (110 Taka)</label>
            </div>
            <div>
              <input type="radio" id="freeShipping" name="shippingMethod" value="Free Shipping" data-charge="0">
              <label for="freeShipping">Free Shipping (0 Taka)</label>
            </div>
          </div>
        </form>
        <p>Total Amount: <span id="totalAmount">0</span> Taka</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="submitOrderBtn">Submit Order</button>
      </div>
    </div>
  </div>
</div>


  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script>
   let cart = [];
let groupedProducts = {};
let shippingCharge = 0;

function encodeForID(string) {
  return btoa(string).replace(/=/g, '').replace(/\+/g, '-').replace(/\//g, '_');
}

function decodeFromID(encodedString) {
  return atob(encodedString.replace(/-/g, '+').replace(/_/g, '/'));
}

function addToCart(product, variations) {
  variations.forEach(variation => {
    if (variation.checked) {
      const item = cart.find(item => item.name === product.Name && item.size === variation.size && item.color === variation.color);
      if (item) {
        item.quantity += 1;
      } else {
        cart.push({ name: product.Name, size: variation.size, color: variation.color, price: product['Discounted Price'], quantity: 1 });
      }
    }
  });
  updateCart();
}

function updateCart() {
  const cartItems = document.getElementById('cartItems');
  const cartTotal = document.getElementById('cartTotal');
  const cartCount = document.getElementById('cartCount');
  const totalAmount = document.getElementById('totalAmount');
  cartItems.innerHTML = '';
  let total = 0;
  let itemCount = 0;
  cart.forEach(item => {
    total += item.price * item.quantity;
    itemCount += item.quantity;
    const listItem = document.createElement('li');
    listItem.className = 'list-group-item';
    listItem.innerHTML = `
      ${item.name} (${item.size}, ${item.color}) x 
      <div class="quantity-controls">
        <button class="btn btn-sm btn-light" onclick="changeQuantity('${item.name}', '${item.size}', '${item.color}', -1)">-</button> 
        <span class="quantity">${item.quantity}</span>
        <button class="btn btn-sm btn-light" onclick="changeQuantity('${item.name}', '${item.size}', '${item.color}', 1)">+</button> 
      </div>
      - ${item.price * item.quantity} Taka
    `;
    cartItems.appendChild(listItem);
  });
  cartTotal.textContent = total;
  cartCount.textContent = itemCount;
  updateTotalAmount();
}

function changeQuantity(name, size, color, change) {
  const item = cart.find(item => item.name === name && item.size === size && item.color === color);
  if (item) {
    item.quantity += change;
    if (item.quantity <= 0) {
      cart = cart.filter(cartItem => cartItem !== item);
    }
    updateCart();
  }
}

function updateTotalAmount() {
  const cartTotal = parseFloat(document.getElementById('cartTotal').textContent) || 0;
  const totalAmount = document.getElementById('totalAmount');
  totalAmount.textContent = cartTotal + shippingCharge;
}

document.querySelectorAll('input[name="shippingMethod"]').forEach(radio => {
  radio.addEventListener('change', function() {
    shippingCharge = parseFloat(this.dataset.charge);
    updateTotalAmount();
  });
});

document.getElementById('checkoutBtn').addEventListener('click', function() {
  $('#cartModal').modal('hide');
  $('#orderModal').modal('show');
});
    


    document.getElementById('submitOrderBtn').addEventListener('click', function() {
      const order = {
        productName: cart.map(item => item.name).join(', '),
        size: cart.map(item => item.size).join(', '),
        color: cart.map(item => item.color).join(', '),
        quantity: cart.map(item => item.quantity).join(', '),
        total: document.getElementById('totalAmount').textContent,
        name: document.getElementById('name').value,
        mobile: document.getElementById('mobile').value,
        area: document.getElementById('area').value,
        thana: document.getElementById('thana').value,
        district: document.getElementById('district').value
      };
      google.script.run.submitOrder(order);
      alert('Order submitted successfully!');
      cart = [];
      updateCart();
      $('#orderModal').modal('hide');
    });

     function displayProducts(products) {
      const productsContainer = document.getElementById('products');
      groupedProducts = {}; // Initialize groupedProducts

      products.forEach(product => {
        if (!groupedProducts[product.Name]) {
          groupedProducts[product.Name] = {
            product: product,
            variations: []
          };
        }
        groupedProducts[product.Name].variations.push({
          size: product.Size,
          color: product.Color,
          price: product.Price,
          discountedPrice: product['Discounted Price']
        });
      });

      Object.values(groupedProducts).forEach(group => {
        const product = group.product;
        const variations = group.variations;
        const encodedProductName = encodeForID(product.Name);
        const productCard = document.createElement('div');
        productCard.className = 'col-md-4';
        productCard.innerHTML = `
          <div class="product-card">
            <img src="${product.Image1}" alt="${product.Name}" class="product-img">
            <h4>${product.Name}</h4>
           <p class="discounted-price">
                    <span class="price-label">PRICE: </span>
                    <span class="price-value">${product['Discounted Price']} Taka</span>
                </p>
            <div id="variations-${encodedProductName}" class="checkbox-container">
              ${variations.map(variation => `
                <div>
                  <input type="checkbox" id="${encodedProductName}-${encodeURIComponent(variation.size)}-${encodeURIComponent(variation.color)}" data-size="${variation.size}" data-color="${variation.color}" data-price="${variation.price}">
                  <label for="${encodedProductName}-${encodeURIComponent(variation.size)}-${encodeURIComponent(variation.color)}">${variation.size}, ${variation.color}</label>
                </div>
              `).join('')}
            </div>
            <button class="btn btn-primary" onclick="addToCart(groupedProducts['${product.Name}'].product, Array.from(document.querySelectorAll('#variations-${encodedProductName} input:checked')).map(el => ({ size: el.dataset.size, color: el.dataset.color, price: el.dataset.price, checked: el.checked })))">Add to Cart</button>
          </div>
        `;
        productsContainer.appendChild(productCard);
      });
    }

    document.addEventListener('DOMContentLoaded', function() {
      google.script.run.withSuccessHandler(displayProducts).getProducts();
    });
  </script>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</body>
</html>


